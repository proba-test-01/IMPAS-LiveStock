<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMPAС LiveStock Pro | Професионален инвентарен мениджър</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --danger: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 250px;
            background: var(--primary);
            color: white;
            padding: 20px 0;
            transition: all 0.3s;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-header h3 {
            color: white;
            font-size: 1.3rem;
        }
        
        .sidebar-menu {
            padding: 20px 0;
        }
        
        .menu-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }
        
        .menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .menu-item.active {
            background: var(--secondary);
        }
        
        .menu-item i {
            margin-right: 10px;
            font-size: 1.1rem;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: white;
            box-shadow: var(--shadow);
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .card {
            background: white;
            border-radius: 5px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .table-responsive {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .badge-success {
            background: #d4edda;
            color: #155724;
        }
        
        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .badge-danger {
            background: #f8d7da;
            color: #721c24;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 5px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
        }
        
        /* Scanner */
        #scanner-container {
            width: 100%;
            margin: 20px 0;
            position: relative;
        }
        
        #scanner-video {
            width: 100%;
            border-radius: 5px;
        }
        
        #scanner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
        }
        
        .scanner-frame {
            width: 70%;
            height: 70%;
            border: 4px solid var(--secondary);
            border-radius: 5px;
            box-shadow: 0 0 0 1000px rgba(0, 0, 0, 0.5);
        }
        
        /* Chat */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .chat-header {
            padding: 15px;
            background: var(--primary);
            color: white;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: #f9f9f9;
        }
        
        .message {
            margin-bottom: 15px;
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 18px;
            position: relative;
        }
        
        .message.sent {
            background: var(--secondary);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .message.received {
            background: #e9ecef;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        
        .message-sender {
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }
        
        .message-time {
            font-size: 0.7rem;
            opacity: 0.7;
            text-align: right;
            margin-top: 5px;
        }
        
        .chat-input {
            display: flex;
            padding: 10px;
            background: white;
            border-top: 1px solid #ddd;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            margin-right: 10px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .main-content {
                margin-left: 0;
            }
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--success);
            color: white;
            border-radius: 5px;
            box-shadow: var(--shadow);
            z-index: 1100;
            display: flex;
            align-items: center;
            transform: translateX(150%);
            transition: transform 0.3s ease-in-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification i {
            margin-right: 10px;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            border-bottom-color: var(--secondary);
            font-weight: 600;
        }
        
        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-warehouse"></i> IMPAС LiveStock</h3>
            </div>
            <div class="sidebar-menu">
                <div class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Табло
                </div>
                <div class="menu-item" data-section="products">
                    <i class="fas fa-boxes"></i> Продукти
                </div>
                <div class="menu-item" data-section="scanner">
                    <i class="fas fa-barcode"></i> Баркод скенер
                </div>
                <div class="menu-item" data-section="import">
                    <i class="fas fa-file-import"></i> Импорт от Excel
                </div>
                <div class="menu-item" data-section="users">
                    <i class="fas fa-users"></i> Потребители
                </div>
                <div class="menu-item" data-section="chat">
                    <i class="fas fa-comments"></i> Чат система
                </div>
                <div class="menu-item" data-section="history">
                    <i class="fas fa-history"></i> История
                </div>
                <div class="menu-item" data-section="settings">
                    <i class="fas fa-cog"></i> Настройки
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <h2 id="section-title">Табло</h2>
                <div class="user-info">
                    <div class="user-avatar">Т</div>
                    <div>
                        <div class="user-name">Здравейте, Теодор</div>
                        <div class="user-role">Admin+</div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div class="section-content" id="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Статистика</div>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div class="stat-card">
                                <h3>Общо продукти</h3>
                                <p class="stat-value">142</p>
                            </div>
                            <div class="stat-card">
                                <h3>Наличности под 5</h3>
                                <p class="stat-value">8</p>
                            </div>
                            <div class="stat-card">
                                <h3>Активни потребители</h3>
                                <p class="stat-value">3</p>
                            </div>
                            <div class="stat-card">
                                <h3>Последна актуализация</h3>
                                <p class="stat-value">2023-11-15 14:30</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Последни промени</div>
                        <button class="btn btn-primary">Виж всички</button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Дата</th>
                                        <th>Действие</th>
                                        <th>Потребител</th>
                                        <th>Детайли</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>2023-11-15 14:25</td>
                                        <td>Редактиран продукт</td>
                                        <td>Теодор</td>
                                        <td>Промяна на цена: 5.99 → 6.50 лв.</td>
                                    </tr>
                                    <tr>
                                        <td>2023-11-15 14:20</td>
                                        <td>Добавен продукт</td>
                                        <td>Иван</td>
                                        <td>Нов продукт: Гайка M6</td>
                                    </tr>
                                    <tr>
                                        <td>2023-11-15 14:15</td>
                                        <td>Импорт от Excel</td>
                                        <td>Система</td>
                                        <td>Актуализирани 12 продукта</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Section -->
            <div class="section-content" id="products-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Управление на продукти</div>
                        <div>
                            <button class="btn btn-primary" id="add-product-btn"><i class="fas fa-plus"></i> Добави продукт</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group" style="margin-bottom: 20px;">
                            <input type="text" class="form-control" id="product-search" placeholder="Търсене по име, код или баркод...">
                        </div>
                        <div class="table-responsive">
                            <table id="products-table">
                                <thead>
                                    <tr>
                                        <th>Код</th>
                                        <th>Име</th>
                                        <th>Наличност</th>
                                        <th>Цена (лв.)</th>
                                        <th>Цена (€)</th>
                                        <th>Баркод</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Sample data -->
                                    <tr>
                                        <td>BOLT-M6-20</td>
                                        <td>Болт M6x20</td>
                                        <td>54</td>
                                        <td>0.45</td>
                                        <td>0.23</td>
                                        <td>123456789012</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>NUT-M6</td>
                                        <td>Гайка M6</td>
                                        <td>128</td>
                                        <td>0.25</td>
                                        <td>0.13</td>
                                        <td>987654321098</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>WASHER-10</td>
                                        <td>Шайба 10мм</td>
                                        <td>3</td>
                                        <td>0.15</td>
                                        <td>0.08</td>
                                        <td>456789012345</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scanner Section -->
            <div class="section-content" id="scanner-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Баркод скенер</div>
                    </div>
                    <div class="card-body">
                        <div style="display: flex; gap: 20px;">
                            <div style="flex: 1;">
                                <div id="scanner-container">
                                    <video id="scanner-video" style="display: none;"></video>
                                    <canvas id="scanner-canvas" style="display: none;"></canvas>
                                    <div id="scanner-overlay">
                                        <div class="scanner-frame"></div>
                                    </div>
                                </div>
                                <div style="text-align: center; margin-top: 20px;">
                                    <button id="start-scanner-btn" class="btn btn-primary">
                                        <i class="fas fa-camera"></i> Стартирай скенер
                                    </button>
                                    <button id="stop-scanner-btn" class="btn btn-danger" style="display: none;">
                                        <i class="fas fa-stop"></i> Спри скенер
                                    </button>
                                </div>
                            </div>
                            <div style="flex: 1;">
                                <h3>Или въведи ръчно:</h3>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="manual-barcode" placeholder="Въведи баркод">
                                </div>
                                <button id="manual-search-btn" class="btn btn-primary">Търси</button>
                                
                                <div id="scanner-result" style="margin-top: 30px;">
                                    <!-- Results will be displayed here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Import Section -->
            <div class="section-content" id="import-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Импорт от Excel</div>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i> Качете Excel файл с инвентар. Системата автоматично ще разпознае колоните.
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Избери Excel файл:</label>
                            <input type="file" class="form-control" id="excel-file" accept=".xlsx, .xls">
                        </div>
                        
                        <div id="excel-preview" style="margin-top: 20px; display: none;">
                            <h4>Преглед на данните:</h4>
                            <div class="table-responsive">
                                <table id="excel-preview-table" class="table">
                                    <thead>
                                        <tr>
                                            <!-- Columns will be added dynamically -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Rows will be added dynamically -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="form-group" style="margin-top: 20px;">
                                <label class="form-label">Колона съдържа:</label>
                                <div id="column-mapping">
                                    <!-- Column mapping will be added dynamically -->
                                </div>
                            </div>
                            
                            <button id="confirm-import-btn" class="btn btn-success">Потвърди импорт</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Section -->
            <div class="section-content" id="users-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Управление на потребители</div>
                        <button class="btn btn-primary" id="add-user-btn"><i class="fas fa-plus"></i> Добави потребител</button>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="users-table">
                                <thead>
                                    <tr>
                                        <th>Име</th>
                                        <th>Код за достъп</th>
                                        <th>Роля</th>
                                        <th>Последна активност</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Теодор</td>
                                        <td>****1234</td>
                                        <td><span class="badge badge-success">Admin+</span></td>
                                        <td>2023-11-15 14:30</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Иван</td>
                                        <td>****5678</td>
                                        <td><span class="badge badge-warning">Администратор</span></td>
                                        <td>2023-11-15 14:25</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Мария</td>
                                        <td>****9012</td>
                                        <td><span class="badge">Продавач</span></td>
                                        <td>2023-11-15 13:45</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Section -->
            <div class="section-content" id="chat-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Чат система</div>
                        <div>
                            <span id="online-users-count">3 активни потребителя</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div style="display: flex; gap: 20px;">
                            <div style="flex: 1;">
                                <div class="chat-container">
                                    <div class="chat-header">
                                        <h4>Общ чат</h4>
                                    </div>
                                    <div class="chat-messages" id="chat-messages">
                                        <div class="message received">
                                            <div class="message-sender">Иван</div>
                                            <div class="message-text">Здравейте, има ли още болтове M6x20?</div>
                                            <div class="message-time">14:25</div>
                                        </div>
                                        <div class="message sent">
                                            <div class="message-sender">Вие</div>
                                            <div class="message-text">Да, имаме още 54 броя.</div>
                                            <div class="message-time">14:26</div>
                                        </div>
                                        <div class="message received">
                                            <div class="message-sender">Мария</div>
                                            <div class="message-text">Току-що импортирах новите цени от Excel.</div>
                                            <div class="message-time">14:30</div>
                                        </div>
                                    </div>
                                    <div class="chat-input">
                                        <input type="text" id="chat-input" placeholder="Напишете съобщение...">
                                        <button id="send-message-btn" class="btn btn-primary"><i class="fas fa-paper-plane"></i></button>
                                    </div>
                                </div>
                            </div>
                            <div style="width: 250px;">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Активни потребители</div>
                                    </div>
                                    <div class="card-body">
                                        <div class="user-list">
                                            <div class="user-item" style="display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #eee;">
                                                <div class="user-avatar" style="width: 30px; height: 30px; font-size: 0.8rem;">Т</div>
                                                <div style="margin-left: 10px;">
                                                    <div>Теодор</div>
                                                    <div style="font-size: 0.8rem; color: var(--success);">онлайн</div>
                                                </div>
                                            </div>
                                            <div class="user-item" style="display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #eee;">
                                                <div class="user-avatar" style="width: 30px; height: 30px; font-size: 0.8rem; background: #e74c3c;">И</div>
                                                <div style="margin-left: 10px;">
                                                    <div>Иван</div>
                                                    <div style="font-size: 0.8rem; color: var(--success);">онлайн</div>
                                                </div>
                                            </div>
                                            <div class="user-item" style="display: flex; align-items: center; padding: 10px;">
                                                <div class="user-avatar" style="width: 30px; height: 30px; font-size: 0.8rem; background: #9b59b6;">М</div>
                                                <div style="margin-left: 10px;">
                                                    <div>Мария</div>
                                                    <div style="font-size: 0.8rem; color: var(--success);">онлайн</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Section -->
            <div class="section-content" id="history-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">История на промените</div>
                        <div>
                            <button class="btn btn-primary">Филтрирай</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="history-table">
                                <thead>
                                    <tr>
                                        <th>Дата</th>
                                        <th>Действие</th>
                                        <th>Потребител</th>
                                        <th>Обект</th>
                                        <th>Стара стойност</th>
                                        <th>Нова стойност</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>2023-11-15 14:25</td>
                                        <td>Редактиране</td>
                                        <td>Теодор</td>
                                        <td>Продукт: Болт M6x20</td>
                                        <td>Цена: 5.99 лв.</td>
                                        <td>Цена: 6.50 лв.</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm">Възстанови</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2023-11-15 14:20</td>
                                        <td>Добавяне</td>
                                        <td>Иван</td>
                                        <td>Продукт: Гайка M6</td>
                                        <td>-</td>
                                        <td>Цена: 0.25 лв.</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm">Възстанови</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2023-11-15 14:15</td>
                                        <td>Импорт</td>
                                        <td>Система</td>
                                        <td>12 продукта</td>
                                        <td>-</td>
                                        <td>Актуализирани</td>
                                        <td>
                                            <button class="btn btn-primary btn-sm">Възстанови</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div class="section-content" id="settings-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Настройки</div>
                    </div>
                    <div class="card-body">
                        <div class="tabs">
                            <div class="tab active" data-tab="general">Общи</div>
                            <div class="tab" data-tab="permissions">Права</div>
                            <div class="tab" data-tab="backup">Резервни копия</div>
                        </div>
                        
                        <div id="general-tab" class="tab-content">
                            <div class="form-group">
                                <label class="form-label">Име на системата:</label>
                                <input type="text" class="form-control" value="IMPAС LiveStock">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Валутен курс (BGN към EUR):</label>
                                <input type="number" class="form-control" step="0.00001" value="1.95583">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Праг за изчерпване:</label>
                                <input type="number" class="form-control" value="5">
                                <small>Бройки под тази стойност ще се маркират в червено</small>
                            </div>
                            <button class="btn btn-success">Запази настройки</button>
                        </div>
                        
                        <div id="permissions-tab" class="tab-content" style="display: none;">
                            <h4>Управление на права</h4>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Роля</th>
                                            <th>Преглед на продукти</th>
                                            <th>Редактиране на продукти</th>
                                            <th>Управление на потребители</th>
                                            <th>Импорт от Excel</th>
                                            <th>Достъп до чат</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Admin+</td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                        </tr>
                                        <tr>
                                            <td>Администратор</td>
                                            <td><input type="checkbox" checked></td>
                                            <td><input type="checkbox" checked></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox" checked></td>
                                            <td><input type="checkbox" checked></td>
                                        </tr>
                                        <tr>
                                            <td>Продавач</td>
                                            <td><input type="checkbox" checked></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox" checked></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button class="btn btn-success">Запази права</button>
                        </div>
                        
                        <div id="backup-tab" class="tab-content" style="display: none;">
                            <h4>Резервни копия</h4>
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i> Последно резервно копие: 2023-11-15 00:00
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-primary">
                                    <i class="fas fa-download"></i> Създай резервно копие
                                </button>
                                <button class="btn btn-success">
                                    <i class="fas fa-upload"></i> Възстанови от копие
                                </button>
                                <button class="btn btn-danger">
                                    <i class="fas fa-file-export"></i> Експорт в Excel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="add-product-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Добави нов продукт</div>
                <button class="close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Код на продукта:</label>
                    <input type="text" class="form-control" id="product-code">
                </div>
                <div class="form-group">
                    <label class="form-label">Име на продукта:</label>
                    <input type="text" class="form-control" id="product-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Наличност:</label>
                    <input type="number" class="form-control" id="product-stock">
                </div>
                <div class="form-group">
                    <label class="form-label">Цена (лв.):</label>
                    <input type="number" step="0.01" class="form-control" id="product-price">
                </div>
                <div class="form-group">
                    <label class="form-label">Баркод:</label>
                    <input type="text" class="form-control" id="product-barcode">
                </div>
                <div class="form-group">
                    <label class="form-label">Снимка:</label>
                    <input type="file" class="form-control" id="product-image">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-btn">Отказ</button>
                <button class="btn btn-success" id="save-product-btn">Запази</button>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal" id="add-user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Добави нов потребител</div>
                <button class="close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Име:</label>
                    <input type="text" class="form-control" id="user-name">
                </div>
                <div class="form-group">
                    <label class="form-label">Код за достъп:</label>
                    <input type="text" class="form-control" id="user-access-code">
                </div>
                <div class="form-group">
                    <label class="form-label">Роля:</label>
                    <select class="form-control" id="user-role">
                        <option value="admin-plus">Admin+</option>
                        <option value="admin">Администратор</option>
                        <option value="seller">Продавач</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Права:</label>
                    <div>
                        <label><input type="checkbox" checked> Преглед на продукти</label><br>
                        <label><input type="checkbox" checked> Редактиране на продукти</label><br>
                        <label><input type="checkbox"> Управление на потребители</label><br>
                        <label><input type="checkbox"> Импорт от Excel</label><br>
                        <label><input type="checkbox" checked> Достъп до чат</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger close-btn">Отказ</button>
                <button class="btn btn-success" id="save-user-btn">Запази</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-message">Успешно запазено!</span>
    </div>

    <script>
        // Simulated database
        const simulatedDB = {
            products: [
                { code: 'BOLT-M6-20', name: 'Болт M6x20', stock: 54, priceBgn: 0.45, priceEur: 0.23, barcode: '123456789012' },
                { code: 'NUT-M6', name: 'Гайка M6', stock: 128, priceBgn: 0.25, priceEur: 0.13, barcode: '987654321098' },
                { code: 'WASHER-10', name: 'Шайба 10мм', stock: 3, priceBgn: 0.15, priceEur: 0.08, barcode: '456789012345' }
            ],
            users: [
                { name: 'Теодор', accessCode: '1234', role: 'Admin+' },
                { name: 'Иван', accessCode: '5678', role: 'Администратор' },
                { name: 'Мария', accessCode: '9012', role: 'Продавач' }
            ],
            history: [
                { date: '2023-11-15 14:25', action: 'Редактиране', user: 'Теодор', details: 'Промяна на цена: 5.99 → 6.50 лв.' },
                { date: '2023-11-15 14:20', action: 'Добавяне', user: 'Иван', details: 'Нов продукт: Гайка M6' },
                { date: '2023-11-15 14:15', action: 'Импорт', user: 'Система', details: 'Актуализирани 12 продукта' }
            ]
        };

        // DOM Elements
        const menuItems = document.querySelectorAll('.menu-item');
        const sectionContents = document.querySelectorAll('.section-content');
        const sectionTitle = document.getElementById('section-title');
        const addProductBtn = document.getElementById('add-product-btn');
        const addProductModal = document.getElementById('add-product-modal');
        const addUserBtn = document.getElementById('add-user-btn');
        const addUserModal = document.getElementById('add-user-modal');
        const closeButtons = document.querySelectorAll('.close, .close-btn');
        const notification = document.getElementById('notification');
        const startScannerBtn = document.getElementById('start-scanner-btn');
        const stopScannerBtn = document.getElementById('stop-scanner-btn');
        const manualBarcodeInput = document.getElementById('manual-barcode');
        const manualSearchBtn = document.getElementById('manual-search-btn');
        const scannerResult = document.getElementById('scanner-result');
        const videoElement = document.getElementById('scanner-video');
        const canvasElement = document.getElementById('scanner-canvas');
        const excelFileInput = document.getElementById('excel-file');
        const excelPreview = document.getElementById('excel-preview');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const chatInput = document.getElementById('chat-input');
        const sendMessageBtn = document.getElementById('send-message-btn');
        const chatMessages = document.getElementById('chat-messages');

        // Navigation
        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                const section = item.getAttribute('data-section');
                
                // Update active menu item
                menuItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                
                // Show corresponding section
                sectionContents.forEach(content => content.style.display = 'none');
                document.getElementById(`${section}-section`).style.display = 'block';
                
                // Update title
                sectionTitle.textContent = item.textContent.trim();
                
                // Special cases
                if (section === 'scanner') {
                    // Initialize scanner when section is opened
                    initScanner();
                } else if (section === 'chat') {
                    // Scroll chat to bottom
                    scrollChatToBottom();
                }
            });
        });

        // Modals
        addProductBtn.addEventListener('click', () => {
            addProductModal.style.display = 'flex';
        });

        addUserBtn.addEventListener('click', () => {
            addUserModal.style.display = 'flex';
        });

        closeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.style.display = 'none';
                });
            });
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        // Save product
        document.getElementById('save-product-btn').addEventListener('click', () => {
            // In a real app, you would save to database here
            showNotification('Продуктът е добавен успешно!');
            addProductModal.style.display = 'none';
            
            // Reset form
            document.querySelectorAll('#add-product-modal input').forEach(input => {
                input.value = '';
            });
        });

        // Save user
        document.getElementById('save-user-btn').addEventListener('click', () => {
            showNotification('Потребителят е добавен успешно!');
            addUserModal.style.display = 'none';
            
            // Reset form
            document.querySelectorAll('#add-user-modal input').forEach(input => {
                input.value = '';
            });
        });

        // Notification
        function showNotification(message) {
            const notificationMessage = document.getElementById('notification-message');
            notificationMessage.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Scanner functionality
        function initScanner() {
            // This is a simulation - in a real app you would use a barcode scanning library
            startScannerBtn.addEventListener('click', () => {
                startScannerBtn.style.display = 'none';
                stopScannerBtn.style.display = 'inline-block';
                videoElement.style.display = 'block';
                
                // Simulate camera access
                setTimeout(() => {
                    showNotification('Скенерът е активиран. Насочете камерата към баркод.');
                }, 500);
                
                // Simulate barcode detection after 3 seconds
                setTimeout(() => {
                    simulateBarcodeDetection('123456789012');
                }, 3000);
            });
            
            stopScannerBtn.addEventListener('click', () => {
                stopScannerBtn.style.display = 'none';
                startScannerBtn.style.display = 'inline-block';
                videoElement.style.display = 'none';
                showNotification('Скенерът е спрян.');
            });
            
            manualSearchBtn.addEventListener('click', () => {
                const barcode = manualBarcodeInput.value.trim();
                if (barcode) {
                    simulateBarcodeDetection(barcode);
                } else {
                    showNotification('Моля, въведете баркод!');
                }
            });
            
            // Allow Enter key in manual barcode input
            manualBarcodeInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    manualSearchBtn.click();
                }
            });
        }

        function simulateBarcodeDetection(barcode) {
            // Find product in simulated database
            const product = simulatedDB.products.find(p => p.barcode === barcode);
            
            if (product) {
                scannerResult.innerHTML = `
                    <div class="card" style="animation: fadeIn 0.3s;">
                        <div class="card-header">
                            <div class="card-title">Намерен продукт</div>
                        </div>
                        <div class="card-body" style="display: flex; align-items: center;">
                            <div style="width: 100px; height: 100px; background: #eee; display: flex; align-items: center; justify-content: center; margin-right: 20px;">
                                <i class="fas fa-box-open" style="font-size: 2rem; color: #777;"></i>
                            </div>
                            <div>
                                <h3>${product.name}</h3>
                                <p><strong>Код:</strong> ${product.code}</p>
                                <p><strong>Наличност:</strong> ${product.stock} бр.</p>
                                <p><strong>Цена:</strong> ${product.priceBgn} лв. (${product.priceEur} €)</p>
                                <p><strong>Баркод:</strong> ${product.barcode}</p>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                scannerResult.innerHTML = `
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-triangle"></i> Продукт с баркод ${barcode} не е намерен!
                    </div>
                `;
            }
            
            manualBarcodeInput.value = '';
        }

        // Excel import simulation
        excelFileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                // In a real app, you would parse the Excel file here
                // For simulation, we'll just show some sample data
                
                excelPreview.style.display = 'block';
                const previewTable = document.querySelector('#excel-preview-table');
                
                // Sample headers and data
                const sampleHeaders = ['Код', 'Име', 'Наличност', 'Цена (лв.)', 'Баркод'];
                const sampleData = [
                    ['SCREW-30', 'Винт 30мм', '45', '0.35', '112233445566'],
                    ['HAMMER', 'Чук', '12', '15.99', '778899001122'],
                    ['PLIERS', 'Клещи', '8', '8.50', '334455667788']
                ];
                
                // Create headers
                let headersHtml = '<tr>';
                sampleHeaders.forEach(header => {
                    headersHtml += `<th>${header}</th>`;
                });
                headersHtml += '</tr>';
                previewTable.querySelector('thead').innerHTML = headersHtml;
                
                // Create rows
                let rowsHtml = '';
                sampleData.forEach(row => {
                    rowsHtml += '<tr>';
                    row.forEach(cell => {
                        rowsHtml += `<td>${cell}</td>`;
                    });
                    rowsHtml += '</tr>';
                });
                previewTable.querySelector('tbody').innerHTML = rowsHtml;
                
                // Create column mapping options
                const columnMapping = document.getElementById('column-mapping');
                columnMapping.innerHTML = '';
                
                sampleHeaders.forEach((header, index) => {
                    const div = document.createElement('div');
                    div.className = 'form-group';
                    div.innerHTML = `
                        <label class="form-label">${header}:</label>
                        <select class="form-control">
                            <option value="">-- Не използвай --</option>
                            <option value="code">Код на продукта</option>
                            <option value="name">Име на продукта</option>
                            <option value="stock">Наличност</option>
                            <option value="price">Цена (лв.)</option>
                            <option value="barcode">Баркод</option>
                        </select>
                    `;
                    columnMapping.appendChild(div);
                });
                
                showNotification('Excel файлът е зареден успешно!');
            }
        });

        // Tabs
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding content
                tabContents.forEach(content => content.style.display = 'none');
                document.getElementById(`${tabId}-tab`).style.display = 'block';
            });
        });

        // Chat
        function scrollChatToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addMessage(sender, message, isSent = false) {
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                              now.getMinutes().toString().padStart(2, '0');
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isSent ? 'sent' : 'received'}`;
            messageDiv.innerHTML = `
                <div class="message-sender">${isSent ? 'Вие' : sender}</div>
                <div class="message-text">${message}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            scrollChatToBottom();
        }

        sendMessageBtn.addEventListener('click', () => {
            const message = chatInput.value.trim();
            if (message) {
                addMessage('Теодор', message, true);
                chatInput.value = '';
                
                // Simulate reply after 1-3 seconds
                setTimeout(() => {
                    const replies = [
                        'Разбрах, благодаря!',
                        'Ще проверя и ще ви уведомя.',
                        'Това е записано в системата.',
                        'Имате ли още въпроси?'
                    ];
                    const randomReply = replies[Math.floor(Math.random() * replies.length)];
                    addMessage('Иван', randomReply);
                }, 1000 + Math.random() * 2000);
            }
        });

        // Allow Enter key in chat
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessageBtn.click();
            }
        });

        // Initial chat messages
        addMessage('Иван', 'Здравейте, има ли още болтове M6x20?');
        addMessage('Теодор', 'Да, имаме още 54 броя.', true);
        addMessage('Мария', 'Току-що импортирах новите цени от Excel.');

        // Initialize the dashboard
        document.getElementById('dashboard-section').style.display = 'block';
    </script>
</body>
</html>
